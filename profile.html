<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8"><title>ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù‡Ø¯ÙŠØ©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>
<body class="bg-blue-50 flex items-center justify-center min-h-screen">
    <div class="bg-white p-8 rounded-3xl shadow-xl w-full max-w-md">
        <h2 class="text-2xl font-bold text-center mb-6">Ø£ÙƒÙ…Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù„Ø§Ø³ØªÙ„Ø§Ù… 10,000 Ù†Ù‚Ø·Ø© ğŸ</h2>
        <form id="pForm" class="space-y-4">
            <input type="text" id="user" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" class="w-full p-4 border rounded-2xl" required>
            <input type="tel" id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" class="w-full p-4 border rounded-2xl" required>
            <button type="submit" class="w-full bg-blue-600 text-white py-4 rounded-2xl font-bold shadow-lg">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨ ÙˆØ§Ù„Ù‡Ø¯ÙŠØ© ğŸš€</button>
        </form>
    </div>
    <script>
        const _supabase = supabase.createClient("YOUR_SUPABASE_URL", "YOUR_SUPABASE_KEY");
        document.getElementById('pForm').onsubmit = async (e) => {
            e.preventDefault();
            if (localStorage.getItem('registered_dz')) return alert("Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø² Ù…Ø³Ø¬Ù„ Ù…Ø³Ø¨Ù‚Ø§Ù‹!");
            
            const { data: { user } } = await _supabase.auth.getUser();
            const { error } = await _supabase.from('profiles').upsert({
                id: user.id, username: document.getElementById('user').value,
                phone: document.getElementById('phone').value, points: 10000
            });

            if (!error) {
                localStorage.setItem('registered_dz', 'true');
                window.location.href = "dashboard.html";
            } else { alert(error.message); }
        };
    </script>
</body>
</html>
