<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8"><title>ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨ | DZ-TRAFFIC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>
<body class="bg-blue-50 flex items-center justify-center min-h-screen">
    <div class="bg-white p-8 rounded-3xl shadow-xl w-full max-w-md">
        <h2 class="text-2xl font-bold text-center mb-6 text-blue-600 font-black">Ù…Ø¨Ø±ÙˆÙƒ! Ø§Ø³ØªÙ„Ù… 10,000 Ù†Ù‚Ø·Ø© ğŸ</h2>
        <form id="profileForm" class="space-y-4">
            <input type="text" id="username" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" class="w-full p-4 border rounded-2xl outline-none" required>
            <input type="tel" id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" class="w-full p-4 border rounded-2xl outline-none" required>
            <button type="submit" class="w-full bg-blue-600 text-white py-4 rounded-2xl font-bold shadow-lg">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨ ÙˆØ§Ù„Ù‡Ø¯ÙŠØ© ğŸš€</button>
        </form>
    </div>
    <script>
        const _supabase = supabase.createClient("https://nbioqaxgjzpyrbcwdkds.supabase.co", "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5iaW9xYXhnanpweXJiY3dka2RzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDY4NzgwOTgsImV4cCI6MjAyMjQ1NDA5OH0.X-S_q6X9-X_q6X9-X_q6X9-X_q6X9");
        document.getElementById('profileForm').onsubmit = async (e) => {
            e.preventDefault();
            if (localStorage.getItem('dz_registered')) return alert("Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø² Ù…Ø³Ø¬Ù„ Ø¨Ø§Ù„ÙØ¹Ù„!");
            const { data: { user } } = await _supabase.auth.getUser();
            const { error } = await _supabase.from('profiles').upsert({
                id: user.id, username: document.getElementById('username').value,
                phone: document.getElementById('phone').value, points: 10000 
            });
            if (!error) {
                localStorage.setItem('dz_registered', 'true');
                window.location.href = "dashboard.html";
            } else { alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„"); }
        };
    </script>
</body>
</html>
